(function(e){function t(t){for(var n,a,c=t[0],s=t[1],o=t[2],l=0,d=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);b&&b(t);while(d.length)d.shift()();return u.push.apply(u,o||[]),r()}function r(){for(var e,t=0;t<u.length;t++){for(var r=u[t],n=!0,a=1;a<r.length;a++){var c=r[a];0!==i[c]&&(n=!1)}n&&(u.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},i={app:0},u=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-624583d8":"efb51c18","chunk-b795938c":"0fdefb8e"}[e]+".js"}function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],r={"chunk-624583d8":1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise((function(t,r){for(var n="css/"+({}[e]||e)+"."+{"chunk-624583d8":"b5955411","chunk-b795938c":"31d6cfe0"}[e]+".css",i=s.p+n,u=document.getElementsByTagName("link"),c=0;c<u.length;c++){var o=u[c],l=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(l===n||l===i))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){o=d[c],l=o.getAttribute("data-href");if(l===n||l===i)return t()}var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.onload=t,b.onerror=function(t){var n=t&&t.target&&t.target.src||i,u=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=n,delete a[e],b.parentNode.removeChild(b),r(u)},b.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(b)})).then((function(){a[e]=0})));var n=i[e];if(0!==n)if(n)t.push(n[2]);else{var u=new Promise((function(t,r){n=i[e]=[t,r]}));t.push(n[2]=u);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var d=new Error;o=function(t){l.onerror=l.onload=null,clearTimeout(b);var r=i[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",d.name="ChunkLoadError",d.type=n,d.request=a,r[1](d)}i[e]=void 0}};var b=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var b=l;u.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0538":function(e,t,r){"use strict";r("7d13")},"082a":function(e,t,r){"use strict";r("1bf4")},"0b91":function(e,t,r){"use strict";r("62d2")},"1bf4":function(e,t,r){},2229:function(e,t,r){"use strict";r("31de")},"281b":function(e,t,r){},2999:function(e,t,r){"use strict";r("e720")},3110:function(e,t,r){},"31de":function(e,t,r){},"32db":function(e,t,r){"use strict";r("52a4")},"35b2":function(e,t,r){},3621:function(e,t,r){},"4bdd":function(e,t,r){"use strict";r("3621")},"52a4":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("d3b7"),r("3ca3"),r("ddb0");var n=r("7a23");function a(e,t,r,a,i,u){var c=Object(n["D"])("the-header"),s=Object(n["D"])("router-view");return Object(n["v"])(),Object(n["h"])("div",null,[Object(n["k"])(c),Object(n["k"])(s,{class:"rv"},{default:Object(n["L"])((function(e){return[Object(n["k"])(n["c"],{name:"route",mode:"out-in"},{default:Object(n["L"])((function(){return[(Object(n["v"])(),Object(n["f"])(Object(n["E"])(e.Component)))]})),_:2},1024)]})),_:1})])}r("ac1f"),r("5319");var i=Object(n["j"])("Find your own Spiritual Guru"),u={class:""},c=Object(n["j"])("All guru"),s={key:0,class:""},o=Object(n["j"])("Requests "),l={class:"requests-counter"},d={key:1},b=Object(n["j"])("Login"),f={key:2},m=Object(n["j"])("Logout");function j(e,t,r,a,j,h){var O=Object(n["D"])("router-link"),p=Object(n["D"])("base-button");return Object(n["v"])(),Object(n["h"])("header",null,[Object(n["i"])("nav",null,[Object(n["i"])("h1",null,[Object(n["k"])(O,{to:"/"},{default:Object(n["L"])((function(){return[i]})),_:1})]),Object(n["i"])("ul",null,[Object(n["i"])("li",u,[Object(n["k"])(O,{to:"/guru"},{default:Object(n["L"])((function(){return[c]})),_:1})]),h.isLoggedIn?(Object(n["v"])(),Object(n["h"])("li",s,[Object(n["k"])(O,{class:"requests-link",to:"/requests"},{default:Object(n["L"])((function(){return[o,Object(n["i"])("span",l,Object(n["G"])(j.reqCount),1)]})),_:1})])):(Object(n["v"])(),Object(n["h"])("li",d,[Object(n["k"])(O,{to:"/auth"},{default:Object(n["L"])((function(){return[b]})),_:1})])),h.isLoggedIn?(Object(n["v"])(),Object(n["h"])("li",f,[Object(n["k"])(p,{onClick:h.logout},{default:Object(n["L"])((function(){return[m]})),_:1},8,["onClick"])])):Object(n["g"])("",!0)])])])}var h=r("1da1"),O=(r("96cf"),{data:function(){return{reqCount:0}},computed:{isLoggedIn:function(){var e=this.$store.getters.isAuthenticated;return e?(this.requestCounter(),e):e}},methods:{logout:function(){this.$store.dispatch("logout"),this.$router.replace("/guru")},requestCounter:function(){setInterval(Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("requests/fetchRequestsQnty");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log("error");case 8:this.reqCount=this.$store.getters["requests/requestCount"];case 9:case"end":return e.stop()}}),e,this,[[0,5]])}))).bind(this),5e3)}}});r("0b91");O.render=j;var p=O,v={components:{TheHeader:p},created:function(){this.$store.dispatch("autoLogin")},computed:{didAutoLogout:function(){return this.$store.getters.didAutoLogout}},watch:{didAutoLogout:function(e,t){e&&e!==t&&this.$router.replace("/guru")}}};r("0538");v.render=a;var g=v,k=r("5c40"),y=r("6c02"),w=Object(n["i"])("h2",null,"Page not found.",-1),I=Object(n["j"])(" This page could not be found - but god can be! Check out all our spiritual "),L=Object(n["j"])("GURUs");function x(e,t){var r=Object(n["D"])("router-link"),a=Object(n["D"])("base-card");return Object(n["v"])(),Object(n["f"])(a,null,{default:Object(n["L"])((function(){return[w,Object(n["i"])("p",null,[I,Object(n["k"])(r,{to:"/guru"},{default:Object(n["L"])((function(){return[L]})),_:1})])]})),_:1})}const q={};q.render=x;var R=q,V={class:"controls"},_=Object(n["j"])("Refresh"),C=Object(n["j"])("Login to register as Spiritual Guru"),G=Object(n["j"])("Register as Guru"),N={key:0},F={key:1},D={key:2};function S(e,t,r,a,i,u){var c=Object(n["D"])("base-dialog"),s=Object(n["D"])("guru-filter"),o=Object(n["D"])("base-button"),l=Object(n["D"])("base-spinner"),d=Object(n["D"])("guru-item"),b=Object(n["D"])("base-card");return Object(n["v"])(),Object(n["h"])("div",null,[Object(n["k"])(c,{show:!!i.error,title:"An error occurred!",onClose:u.handleError},{default:Object(n["L"])((function(){return[Object(n["i"])("p",null,Object(n["G"])(i.error),1)]})),_:1},8,["show","onClose"]),Object(n["i"])("section",null,[Object(n["k"])(s,{onChangeFilter:u.setFilters},null,8,["onChangeFilter"])]),Object(n["i"])("section",null,[Object(n["k"])(b,null,{default:Object(n["L"])((function(){return[Object(n["i"])("div",V,[Object(n["k"])(o,{mode:"outline",onClick:t[0]||(t[0]=function(e){return u.loadGurus(!0)})},{default:Object(n["L"])((function(){return[_]})),_:1}),u.isLoggedIn?Object(n["g"])("",!0):(Object(n["v"])(),Object(n["f"])(o,{key:0,link:"",to:"/auth?redirect=register"},{default:Object(n["L"])((function(){return[C]})),_:1})),!u.isLoggedIn||u.isGuru||i.isLoading?Object(n["g"])("",!0):(Object(n["v"])(),Object(n["f"])(o,{key:1,link:"",to:"/register"},{default:Object(n["L"])((function(){return[G]})),_:1}))]),i.isLoading?(Object(n["v"])(),Object(n["h"])("div",N,[Object(n["k"])(l)])):u.hasGuru?(Object(n["v"])(),Object(n["h"])("ul",F,[(Object(n["v"])(!0),Object(n["h"])(n["a"],null,Object(n["B"])(u.filteredGuru,(function(e){return Object(n["v"])(),Object(n["f"])(d,{key:e.id,id:e.id,"first-name":e.firstName,"last-name":e.lastName,rate:e.hourlyRate,areas:e.areas},null,8,["id","first-name","last-name","rate","areas"])})),128))])):(Object(n["v"])(),Object(n["h"])("h3",D,"No guru found."))]})),_:1})])])}r("4de4"),r("caad"),r("2532");Object(n["y"])("data-v-4b2a15f2");var A={class:"actions"},$=Object(n["j"])("Contact"),E=Object(n["j"])("View Details");function U(e,t,r,a,i,u){var c=Object(n["D"])("base-badge"),s=Object(n["D"])("base-button");return Object(n["v"])(),Object(n["h"])("li",null,[Object(n["i"])("h3",null,Object(n["G"])(u.fullName),1),Object(n["i"])("h4",null,"$"+Object(n["G"])(r.rate)+"/hour",1),Object(n["i"])("div",null,[(Object(n["v"])(!0),Object(n["h"])(n["a"],null,Object(n["B"])(r.areas,(function(e){return Object(n["v"])(),Object(n["f"])(c,{type:e,title:e,key:e},null,8,["type","title"])})),128))]),Object(n["i"])("div",A,[Object(n["k"])(s,{link:"",mode:"outline",to:u.guruContactLink},{default:Object(n["L"])((function(){return[$]})),_:1},8,["to"]),Object(n["k"])(s,{link:"",to:u.guruDetailsLink},{default:Object(n["L"])((function(){return[E]})),_:1},8,["to"])])])}Object(n["w"])();var T={props:["id","firstName","lastName","rate","areas"],computed:{fullName:function(){return this.firstName+" "+this.lastName},guruContactLink:function(){return this.$route.path+"/"+this.id+"/contact"},guruDetailsLink:function(){return this.$route.path+"/"+this.id}}};r("4bdd");T.render=U,T.__scopeId="data-v-4b2a15f2";var M=T;Object(n["y"])("data-v-6f5bc2e8");var B=Object(n["i"])("h2",null,"Find Your Guru",-1),P={class:"filter-option"},J=Object(n["i"])("label",{for:"christianity"},"Christianity",-1),H=Object(n["i"])("label",{for:"islam"},"Islam",-1),z=Object(n["i"])("label",{for:"taoism"},"Taoism",-1),Q=Object(n["i"])("label",{for:"guidence"},"Guidence",-1);function Y(e,t,r,a,i,u){var c=Object(n["D"])("base-card");return Object(n["v"])(),Object(n["f"])(c,null,{default:Object(n["L"])((function(){return[B,Object(n["i"])("span",P,[Object(n["i"])("input",{type:"checkbox",name:"",id:"christianity",checked:"",onChange:t[0]||(t[0]=function(){return u.setFilter&&u.setFilter.apply(u,arguments)})},null,32),J,Object(n["i"])("input",{type:"checkbox",name:"",id:"islam",checked:"",onChange:t[1]||(t[1]=function(){return u.setFilter&&u.setFilter.apply(u,arguments)})},null,32),H,Object(n["i"])("input",{type:"checkbox",name:"",id:"taoism",checked:"",onChange:t[2]||(t[2]=function(){return u.setFilter&&u.setFilter.apply(u,arguments)})},null,32),z,Object(n["i"])("input",{type:"checkbox",name:"",id:"guidence",checked:"",onChange:t[3]||(t[3]=function(){return u.setFilter&&u.setFilter.apply(u,arguments)})},null,32),Q])]})),_:1})}Object(n["w"])();var K=r("ade3"),W=r("5530"),X={emits:["change-filter"],data:function(){return{filters:{christianity:!0,islam:!0,taoism:!0}}},methods:{setFilter:function(e){var t=e.target.id,r=e.target.checked,n=Object(W["a"])(Object(W["a"])({},this.filters),{},Object(K["a"])({},t,r));this.filters=n,this.$emit("change-filter",n)}}};r("d99f");X.render=Y,X.__scopeId="data-v-6f5bc2e8";var Z=X,ee={components:{GuruItem:M,GuruFilter:Z},data:function(){return{isLoading:!1,error:null,activeFilters:{christianity:!0,islam:!0,taoism:!0}}},computed:{filteredGuru:function(){var e=this,t=this.$store.getters["guru/guru"];return t.filter((function(t){return!(!e.activeFilters.christianity||!t.areas.includes("christianity"))||(!(!e.activeFilters.islam||!t.areas.includes("islam"))||(!(!e.activeFilters.taoism||!t.areas.includes("taoism"))||!(!e.activeFilters.guidence||!t.areas.includes("guidence"))))}))},isGuru:function(){return this.$store.getters["guru/isGuru"]},hasGuru:function(){return!this.isLoading&&this.$store.getters["guru/hasGuru"]},isLoggedIn:function(){return this.$store.getters.isAuthenticated}},created:function(){this.loadGurus()},methods:{setFilters:function(e){this.activeFilters=e},loadGurus:function(){var e=arguments,t=this;return Object(h["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.length>0&&void 0!==e[0]&&e[0],t.isLoading=!0,r.prev=2,r.next=5,t.$store.dispatch("guru/loadGurus",{forseRefresh:n});case 5:r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](2),t.error=r.t0.message||"something went wrong";case 10:t.isLoading=!1;case 11:case"end":return r.stop()}}),r,null,[[2,7]])})))()},handleError:function(){this.error=null}}};r("32db");ee.render=S;var te=ee,re=Object(n["i"])("h2",null,"Register as a guru now!",-1);function ne(e,t,r,a,i,u){var c=Object(n["D"])("guru-form"),s=Object(n["D"])("base-card");return Object(n["v"])(),Object(n["h"])("section",null,[Object(n["k"])(s,null,{default:Object(n["L"])((function(){return[re,Object(n["k"])(c,{onSaveData:u.saveData},null,8,["onSaveData"])]})),_:1})])}r("a4d3"),r("e01a");Object(n["y"])("data-v-518b14fa");var ae=Object(n["i"])("label",{for:"firstname"},"Firstname",-1),ie={key:0},ue=Object(n["i"])("label",{for:"lastname"},"Lastname",-1),ce={key:0},se=Object(n["i"])("label",{for:"description"},"Description",-1),oe={key:0},le=Object(n["i"])("label",{for:"rate"},"Hourly Rate",-1),de={key:0},be=Object(n["i"])("h3",null,"Areas of Expertise",-1),fe=Object(n["i"])("label",{for:"christianity"},"Christianity",-1),me=Object(n["i"])("label",{for:"islam"},"Islam",-1),je=Object(n["i"])("label",{for:"taoism"},"Taoism",-1),he=Object(n["i"])("label",{for:"guidence"},"Guidence",-1),Oe={key:0},pe={key:0},ve=Object(n["j"])("Register");function ge(e,t,r,a,i,u){var c=Object(n["D"])("base-button");return Object(n["v"])(),Object(n["h"])("form",{onSubmit:t[16]||(t[16]=Object(n["N"])((function(){return u.submitForm&&u.submitForm.apply(u,arguments)}),["prevent"]))},[Object(n["i"])("div",{class:Object(n["r"])(["form-control",{invalid:!i.firstName.isValid}])},[ae,Object(n["M"])(Object(n["i"])("input",{type:"text",id:"firstname","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.firstName.val=e}),onBlur:t[1]||(t[1]=function(e){return u.clearValidity("firstName")})},null,544),[[n["J"],i.firstName.val,void 0,{trim:!0}]]),i.firstName.isValid?Object(n["g"])("",!0):(Object(n["v"])(),Object(n["h"])("p",ie,"Firstname must not be empty."))],2),Object(n["i"])("div",{class:Object(n["r"])(["form-control",{invalid:!i.lastName.isValid}])},[ue,Object(n["M"])(Object(n["i"])("input",{type:"text",id:"lastname","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.lastName.val=e}),onBlur:t[3]||(t[3]=function(e){return u.clearValidity("lastName")})},null,544),[[n["J"],i.lastName.val,void 0,{trim:!0}]]),i.lastName.isValid?Object(n["g"])("",!0):(Object(n["v"])(),Object(n["h"])("p",ce,"Lastname must not be empty."))],2),Object(n["i"])("div",{class:Object(n["r"])(["form-control",{invalid:!i.description.isValid}])},[se,Object(n["M"])(Object(n["i"])("textarea",{id:"description",rows:"5","onUpdate:modelValue":t[4]||(t[4]=function(e){return i.description.val=e}),onBlur:t[5]||(t[5]=function(e){return u.clearValidity("description")})},null,544),[[n["J"],i.description.val,void 0,{trim:!0}]]),i.description.isValid?Object(n["g"])("",!0):(Object(n["v"])(),Object(n["h"])("p",oe,"Description must not be empty."))],2),Object(n["i"])("div",{class:Object(n["r"])(["form-control",{invalid:!i.rate.isValid}])},[le,Object(n["M"])(Object(n["i"])("input",{type:"number",id:"rate","onUpdate:modelValue":t[6]||(t[6]=function(e){return i.rate.val=e}),onBlur:t[7]||(t[7]=function(e){return u.clearValidity("rate")})},null,544),[[n["J"],i.rate.val,void 0,{number:!0}]]),i.rate.isValid?Object(n["g"])("",!0):(Object(n["v"])(),Object(n["h"])("p",de,"Rate must be greater than 0."))],2),Object(n["i"])("div",{class:Object(n["r"])(["form-control",{invalid:!i.areas.isValid}])},[be,Object(n["i"])("div",null,[Object(n["M"])(Object(n["i"])("input",{type:"checkbox",id:"christianity",value:"christianity","onUpdate:modelValue":t[8]||(t[8]=function(e){return i.areas.val=e}),onBlur:t[9]||(t[9]=function(e){return u.clearValidity("areas")})},null,544),[[n["I"],i.areas.val]]),fe]),Object(n["i"])("div",null,[Object(n["M"])(Object(n["i"])("input",{type:"checkbox",id:"islam",value:"islam","onUpdate:modelValue":t[10]||(t[10]=function(e){return i.areas.val=e}),onBlur:t[11]||(t[11]=function(e){return u.clearValidity("areas")})},null,544),[[n["I"],i.areas.val]]),me]),Object(n["i"])("div",null,[Object(n["M"])(Object(n["i"])("input",{type:"checkbox",id:"taoism",value:"taoism","onUpdate:modelValue":t[12]||(t[12]=function(e){return i.areas.val=e}),onBlur:t[13]||(t[13]=function(e){return u.clearValidity("areas")})},null,544),[[n["I"],i.areas.val]]),je]),Object(n["i"])("div",null,[Object(n["M"])(Object(n["i"])("input",{type:"checkbox",id:"guidence",value:"guidence","onUpdate:modelValue":t[14]||(t[14]=function(e){return i.areas.val=e}),onBlur:t[15]||(t[15]=function(e){return u.clearValidity("areas")})},null,544),[[n["I"],i.areas.val]]),he]),i.areas.isValid?Object(n["g"])("",!0):(Object(n["v"])(),Object(n["h"])("p",Oe,"At least one expertise must be selected."))],2),i.formIsValid?Object(n["g"])("",!0):(Object(n["v"])(),Object(n["h"])("p",pe,"Please fix the above errors and submit again.")),Object(n["k"])(c,null,{default:Object(n["L"])((function(){return[ve]})),_:1})],32)}Object(n["w"])();var ke={emits:["save-data"],data:function(){return{firstName:{val:"",isValid:!0},lastName:{val:"",isValid:!0},description:{val:"",isValid:!0},rate:{val:null,isValid:!0},areas:{val:[],isValid:!0},formIsValid:!0}},methods:{clearValidity:function(e){this[e].isValid=!0},validateForm:function(){this.formIsValid=!0,""===this.firstName.val&&(this.firstName.isValid=!1,this.formIsValid=!1),""===this.lastName.val&&(this.lastName.isValid=!1,this.formIsValid=!1),""===this.description.val&&(this.description.isValid=!1,this.formIsValid=!1),(!this.rate.val||this.rate.val<0)&&(this.rate.isValid=!1,this.formIsValid=!1),0===this.areas.val.length&&(this.areas.isValid=!1,this.formIsValid=!1)},submitForm:function(){if(this.validateForm(),this.formIsValid){var e={first:this.firstName.val,last:this.lastName.val,desc:this.description.val,rate:this.rate.val,areas:this.areas.val};this.$emit("save-data",e)}}}};r("b259");ke.render=ge,ke.__scopeId="data-v-518b14fa";var ye=ke,we={components:{GuruForm:ye},methods:{saveData:function(e){this.$store.dispatch("guru/registerGuru",e),this.$router.replace("/guru")}}};we.render=ne;var Ie=we;Object(n["y"])("data-v-41a06317");var Le={class:"form-control"},xe=Object(n["i"])("label",{for:"email"},"Your E-mail",-1),qe={class:"form-control"},Re=Object(n["i"])("label",{for:"message"},"Massage",-1),Ve={key:0,class:"errors"},_e={class:"actions"},Ce=Object(n["j"])(" Send Message ");function Ge(e,t,r,a,i,u){var c=Object(n["D"])("base-button");return Object(n["v"])(),Object(n["h"])("form",{action:"",onSubmit:t[2]||(t[2]=Object(n["N"])((function(){return u.submitForm&&u.submitForm.apply(u,arguments)}),["prevent"]))},[Object(n["i"])("div",Le,[xe,Object(n["M"])(Object(n["i"])("input",{type:"email",name:"",id:"email","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.email=e})},null,512),[[n["J"],i.email,void 0,{trim:!0}]])]),Object(n["i"])("div",qe,[Re,Object(n["M"])(Object(n["i"])("textarea",{name:"",rows:"5",id:"message","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.message=e})},null,512),[[n["J"],i.message,void 0,{trim:!0}]])]),i.formIsValid?Object(n["g"])("",!0):(Object(n["v"])(),Object(n["h"])("p",Ve," Please enter a valid email and non-empty message ")),Object(n["i"])("div",_e,[Object(n["k"])(c,null,{default:Object(n["L"])((function(){return[Ce]})),_:1})])],32)}Object(n["w"])();var Ne={data:function(){return{email:"",message:"",formIsValid:!0}},methods:{submitForm:function(){this.formIsValid=!0,""!==this.email&&this.email.includes("@")&&""!==this.message?(this.$store.dispatch("requests/contactGuru",{email:this.email,message:this.message,guruId:this.$route.params.id}),this.$router.replace("/guru")):this.formIsValid=!1}}};r("2229");Ne.render=Ge,Ne.__scopeId="data-v-41a06317";var Fe=Ne;Object(n["y"])("data-v-21de8eb2");var De=Object(n["i"])("header",null,[Object(n["i"])("h2",null,"Request Recevies")],-1),Se={key:1},Ae={key:2};function $e(e,t,r,a,i,u){var c=Object(n["D"])("base-dialog"),s=Object(n["D"])("base-spinner"),o=Object(n["D"])("request-item"),l=Object(n["D"])("base-card");return Object(n["v"])(),Object(n["h"])("div",null,[Object(n["k"])(c,{show:!!i.error,title:"An error occurred!",onClose:u.handleError},{default:Object(n["L"])((function(){return[Object(n["i"])("p",null,Object(n["G"])(i.error),1)]})),_:1},8,["show","onClose"]),Object(n["i"])("section",null,[Object(n["k"])(l,null,{default:Object(n["L"])((function(){return[De,i.isLoading?(Object(n["v"])(),Object(n["f"])(s,{key:0})):u.hasRequests&&!i.isLoading?(Object(n["v"])(),Object(n["h"])("ul",Se,[(Object(n["v"])(!0),Object(n["h"])(n["a"],null,Object(n["B"])(u.recivedRequests,(function(e){return Object(n["v"])(),Object(n["f"])(o,{key:e.id,email:e.userEmail,message:e.message},null,8,["email","message"])})),128))])):(Object(n["v"])(),Object(n["h"])("h3",Ae,"You haven`t reveived any requests"))]})),_:1})])])}Object(n["w"])(),Object(n["y"])("data-v-dfb89f54");var Ee={class:""},Ue=["href"];function Te(e,t,r,a,i,u){return Object(n["v"])(),Object(n["h"])("li",null,[Object(n["i"])("div",Ee,[Object(n["i"])("a",{href:u.emailLink},Object(n["G"])(r.email),9,Ue)]),Object(n["i"])("p",null,Object(n["G"])(r.message),1)])}Object(n["w"])();var Me={props:["email","message"],computed:{emailLink:function(){return"mailto:"+this.email}}};r("2999");Me.render=Te,Me.__scopeId="data-v-dfb89f54";var Be=Me,Pe={components:{RequestItem:Be},data:function(){return{isLoading:!1,error:null}},computed:{recivedRequests:function(){return this.$store.getters["requests/requests"]},hasRequests:function(){return this.$store.getters["requests/hasRequests"]}},created:function(){this.loadRequests()},methods:{loadRequests:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.prev=1,t.next=4,e.$store.dispatch("requests/fetchRequests");case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),e.error=t.t0.message||"something failed";case 9:e.isLoading=!1;case 10:case"end":return t.stop()}}),t,null,[[1,6]])})))()},handleError:function(){this.error=null}}};r("082a");Pe.render=$e,Pe.__scopeId="data-v-21de8eb2";var Je=Pe;Object(n["y"])("data-v-45949e0e");var He={class:"`"},ze={class:"form-control"},Qe=Object(n["i"])("label",{for:"email"},"E-Mail",-1),Ye={class:"form-control"},Ke=Object(n["i"])("label",{for:"password"},"Password",-1),We={key:0};function Xe(e,t,r,a,i,u){var c=Object(n["D"])("base-dialog"),s=Object(n["D"])("base-spinner"),o=Object(n["D"])("base-button"),l=Object(n["D"])("base-card");return Object(n["v"])(),Object(n["h"])("div",He,[Object(n["k"])(c,{show:!!i.error,title:"An error occured",onClose:u.handleError},{default:Object(n["L"])((function(){return[Object(n["i"])("p",null,Object(n["G"])(i.error),1)]})),_:1},8,["show","onClose"]),Object(n["k"])(c,{show:i.isLoading,title:"Authenticating...",fixed:""},{default:Object(n["L"])((function(){return[Object(n["k"])(s)]})),_:1},8,["show"]),Object(n["k"])(l,null,{default:Object(n["L"])((function(){return[Object(n["i"])("form",{onSubmit:t[2]||(t[2]=Object(n["N"])((function(){return u.submitForm&&u.submitForm.apply(u,arguments)}),["prevent"]))},[Object(n["i"])("div",ze,[Qe,Object(n["M"])(Object(n["i"])("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.email=e})},null,512),[[n["J"],i.email,void 0,{trim:!0}]])]),Object(n["i"])("div",Ye,[Ke,Object(n["M"])(Object(n["i"])("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.password=e})},null,512),[[n["J"],i.password,void 0,{trim:!0}]])]),i.formIsValid?Object(n["g"])("",!0):(Object(n["v"])(),Object(n["h"])("p",We," Please enter a valid email and password (must be at least 6 characters long). ")),Object(n["k"])(o,null,{default:Object(n["L"])((function(){return[Object(n["j"])(Object(n["G"])(u.submitButtonCaption),1)]})),_:1}),Object(n["k"])(o,{type:"button",mode:"flat",onClick:u.switchAuthMode},{default:Object(n["L"])((function(){return[Object(n["j"])(Object(n["G"])(u.switchModeButtonCaption),1)]})),_:1},8,["onClick"])],32)]})),_:1})])}Object(n["w"])();var Ze={data:function(){return{email:"",password:"",formIsValid:!0,mode:"login",isLoading:!1,error:null}},computed:{submitButtonCaption:function(){return"login"===this.mode?"Login":"Signup"},switchModeButtonCaption:function(){return"login"===this.mode?"Signup instead":"Login instead"}},methods:{submitForm:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.formIsValid=!0,""!==e.email&&e.email.includes("@")&&!(e.password.length<6)){t.next=4;break}return e.formIsValid=!1,t.abrupt("return");case 4:if(e.isLoading=!0,t.prev=5,"login"!==e.mode){t.next=11;break}return t.next=9,e.$store.dispatch("login",{email:e.email,password:e.password});case 9:t.next=13;break;case 11:return t.next=13,e.$store.dispatch("signup",{email:e.email,password:e.password});case 13:r="/"+(e.$route.query.redirect||"guru"),e.$router.replace(r),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](5),e.error=t.t0.message||"Failed to auth";case 20:e.isLoading=!1;case 21:case"end":return t.stop()}}),t,null,[[5,17]])})))()},switchAuthMode:function(){"login"===this.mode?this.mode="signup":this.mode="login"},handleError:function(){this.error=null}}};r("706d");Ze.render=Xe,Ze.__scopeId="data-v-45949e0e";var et,tt=Ze,rt=r("5502"),nt={registerGuru:function(e,t){e.guru.push(t)},setGuru:function(e,t){e.guru=t},setFetchTimestamp:function(e){e.lastFetch=(new Date).getTime()}},at=(r("99af"),{registerGuru:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.rootGetters.userId,a={firstName:t.first,lastName:t.last,description:t.desc,hourlyRate:t.rate,areas:t.areas},i=e.rootGetters.token,r.next=5,fetch("https://find-guru-default-rtdb.europe-west1.firebasedatabase.app/guru/".concat(n,".json?auth=").concat(i),{method:"PUT",body:JSON.stringify(a)});case 5:u=r.sent,u.ok||console.log(u),e.commit("registerGuru",Object(W["a"])(Object(W["a"])({},a),{},{id:n}));case 8:case"end":return r.stop()}}),r)})))()},loadGurus:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i,u,c,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.forceRefresh||e.getters.shouldUpdate){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,fetch("https://find-guru-default-rtdb.europe-west1.firebasedatabase.app/guru.json");case 4:return n=r.sent,r.next=7,n.json();case 7:if(a=r.sent,n.ok){r.next=11;break}throw i=new Error(a.massage||"failed to fetch"),i;case 11:for(c in u=[],a)s={id:c,firstName:a[c].firstName,lastName:a[c].lastName,description:a[c].description,hourlyRate:a[c].hourlyRate,areas:a[c].areas},u.push(s);e.commit("setGuru",u),e.commit("setFetchTimestamp",u);case 15:case"end":return r.stop()}}),r)})))()}}),it={guru:function(e){return e.guru},hasGuru:function(e){return e.guru&&e.guru.length>0},isGuru:function(e,t,r,n){var a=t.guru,i=n.userId;return a.some((function(e){return e.id===i}))},shouldUpdate:function(e){var t=e.lastFetch;if(!t)return!0;var r=(new Date).getTime();return console.log("its updated"),(r-t)/1e3>60}},ut={namespaced:!0,lastFetch:null,state:function(){return{guru:[{id:"c1",firstName:"Maximilian",lastName:"SchwarzmÃ¼ller",areas:["frontend","backend","career"],description:"I'm Maximilian and I've worked as a freelance web developer for years. Let me help you become a developer as well!",hourlyRate:30},{id:"c2",firstName:"Julie",lastName:"Jones",areas:["frontend","career"],description:"I am Julie and as a senior developer in a big tech company, I can help you get your first job or progress in your current role.",hourlyRate:30}]}},mutations:nt,actions:at,getters:it},ct=(r("b0c0"),r("b64b"),{contactGuru:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n={userEmail:t.email,message:t.message},r.next=3,fetch("https://find-guru-default-rtdb.europe-west1.firebasedatabase.app/requests/".concat(t.guruId,".json"),{method:"POST",body:JSON.stringify(n)});case 3:return a=r.sent,r.next=6,a.json();case 6:if(i=r.sent,n.id=i.name,n.guruId=t.guruId,a.ok){r.next=12;break}throw u=new Error(i.massage||"failed to send request"),u;case 12:e.commit("addRequest",n);case 13:case"end":return r.stop()}}),r)})))()},fetchRequests:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,u,c,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.rootGetters.token,n=e.rootGetters.userId,t.next=4,fetch("https://find-guru-default-rtdb.europe-west1.firebasedatabase.app/requests/".concat(n,".json?auth=").concat(r));case 4:return a=t.sent,t.next=7,a.json();case 7:if(i=t.sent,a.ok){t.next=11;break}throw u=new Error(i.massage||"failed to send request"),u;case 11:for(s in c=[],i)o={id:s,guruId:n,userEmail:i[s].userEmail,message:i[s].message},c.push(o);e.commit("setRequests",c);case 14:case"end":return t.stop()}}),t)})))()},fetchRequestsQnty:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.rootGetters.token,n=e.rootGetters.userId,t.next=4,fetch("https://find-guru-default-rtdb.europe-west1.firebasedatabase.app/requests/".concat(n,".json?auth=").concat(r));case 4:return a=t.sent,t.next=7,a.json();case 7:i=t.sent,u=Object.keys(i).length,e.commit("setRequestsCount",u);case 10:case"end":return t.stop()}}),t)})))()}}),st={requests:function(e,t,r,n){var a=n.userId;return e.requests.filter((function(e){return e.guruId===a}))},hasRequests:function(e,t){return t.requests&&t.requests.length>0},requestCount:function(e){return e.requestCount}},ot={addRequest:function(e,t){e.requests.push(t)},setRequests:function(e,t){e.requests=t},setRequestsCount:function(e,t){e.requestCount=t}},lt={namespaced:!0,state:function(){return{requests:[],requestCount:0}},mutations:ot,actions:ct,getters:st},dt={setUser:function(e,t){e.token=t.token,e.userId=t.userId,e.didAutoLogout=!1},setAutoLogout:function(e){e.didAutoLogout=!0}},bt={login:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",e.dispatch("auth",Object(W["a"])(Object(W["a"])({},t),{},{mode:"login"})));case 1:case"end":return r.stop()}}),r)})))()},signup:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",e.dispatch("auth",Object(W["a"])(Object(W["a"])({},t),{},{mode:"signup"})));case 1:case"end":return r.stop()}}),r)})))()},auth:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i,u,c,s,o,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.mode,a="AIzaSyAFB7QHtbis2r472-UPNMyA9h8zUrSCTk0",i="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat(a),"signup"===n&&(i="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=".concat(a)),r.next=6,fetch(i,{method:"POST",body:JSON.stringify({email:t.email,password:t.password,returnSecureToken:!0})});case 6:return u=r.sent,r.next=9,u.json();case 9:if(c=r.sent,u.ok){r.next=13;break}throw s=new Error(c.message||"Failed to auth"),s;case 13:o=1e3*+c.expiresIn,l=(new Date).getTime()+o,localStorage.setItem("token",c.idToken),localStorage.setItem("userId",c.localId),localStorage.setItem("tokenExpiration",l),et=setTimeout((function(){e.dispatch("autoLogout")}),o),e.commit("setUser",{token:c.idToken,userId:c.localId});case 20:case"end":return r.stop()}}),r)})))()},autoLogin:function(e){var t=localStorage.getItem("token"),r=localStorage.getItem("userId"),n=localStorage.getItem("tokenExpiration"),a=+n-(new Date).getTime();a<1e4||(setTimeout((function(){e.dispatch("autoLogout")}),a),t&&r&&e.commit("setUser",{token:t,userId:r}))},autoLogout:function(e){e.dispatch("logout"),e.commit("setAutoLogout")},logout:function(e){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("tokenExpiration"),clearTimeout(et),e.commit("setUser",{token:null,userId:null})}},ft={userId:function(e){return e.userId},token:function(e){return e.token},isAuthenticated:function(e){return!!e.token},didAutoLogout:function(e){return e.didAutoLogout}},mt={state:function(){return{userId:null,token:null,didAutoLogout:!1}},mutations:dt,actions:bt,getters:ft},jt=Object(rt["a"])({modules:{guru:ut,requests:lt,auth:mt}}),ht=jt,Ot=Object(k["o"])((function(){return r.e("chunk-b795938c").then(r.bind(null,"b086"))})),pt=Object(y["a"])({history:Object(y["b"])(),routes:[{path:"/",redirect:"/guru"},{path:"/guru",component:te},{path:"/guru/:id",component:Ot,props:!0,children:[{path:"contact",component:Fe}]},{path:"/register",component:Ie,meta:{requiresAuth:!0}},{path:"/requests",component:Je,meta:{requiresAuth:!0}},{path:"/auth",component:tt,meta:{requiresUnauth:!0}},{path:"/:notFound(.*)",component:R}]});pt.beforeEach((function(e,t,r){e.meta.requiresAuth&&!ht.getters.isAuthenticated?r("/auth"):e.meta.requiresUnauth&&ht.getters.isAuthenticated?r("/guru"):r()}));var vt=pt;Object(n["y"])("data-v-3ca84d9c");var gt={class:"card"};function kt(e,t){return Object(n["v"])(),Object(n["h"])("div",gt,[Object(n["C"])(e.$slots,"default",{},void 0,!0)])}Object(n["w"])();r("755d");const yt={};yt.render=kt,yt.__scopeId="data-v-3ca84d9c";var wt=yt;r("9911");function It(e,t,r,a,i,u){var c=Object(n["D"])("router-link");return Object(n["v"])(),Object(n["h"])("div",null,[r.link?(Object(n["v"])(),Object(n["f"])(c,{key:1,to:r.to,class:Object(n["r"])(r.mode)},{default:Object(n["L"])((function(){return[Object(n["C"])(e.$slots,"default",{},void 0,!0)]})),_:3},8,["to","class"])):(Object(n["v"])(),Object(n["h"])("button",{key:0,class:Object(n["r"])(r.mode)},[Object(n["C"])(e.$slots,"default",{},void 0,!0)],2))])}var Lt={props:{mode:{type:String,required:!1,default:null},link:{type:Boolean,required:!1,default:!1},to:{type:String,required:!1,default:"/"}}};r("f7e5");Lt.render=It,Lt.__scopeId="data-v-3d153540";var xt=Lt;function qt(e,t,r,a,i,u){return Object(n["v"])(),Object(n["h"])("span",{class:Object(n["r"])(["badge",r.type])},Object(n["G"])(u.text),3)}var Rt={props:["type","title"],computed:{text:function(){return this.title.toUpperCase()}}};r("9de2");Rt.render=qt,Rt.__scopeId="data-v-15b5e3ac";var Vt=Rt;Object(n["y"])("data-v-d00c23b4");var _t={class:"spinner"},Ct=Object(n["i"])("div",{class:"lds-roller"},[Object(n["i"])("div"),Object(n["i"])("div"),Object(n["i"])("div"),Object(n["i"])("div"),Object(n["i"])("div"),Object(n["i"])("div"),Object(n["i"])("div"),Object(n["i"])("div")],-1),Gt=[Ct];function Nt(e,t){return Object(n["v"])(),Object(n["h"])("div",_t,Gt)}Object(n["w"])();r("d13c");const Ft={};Ft.render=Nt,Ft.__scopeId="data-v-d00c23b4";var Dt=Ft,St=Object(n["l"])((function(){return r.e("chunk-624583d8").then(r.bind(null,"ae92"))})),At=Object(n["e"])(g);At.use(vt),At.use(ht),At.component("base-card",wt),At.component("base-button",xt),At.component("base-badge",Vt),At.component("base-spinner",Dt),At.component("base-dialog",St),At.mount("#app")},5704:function(e,t,r){},"62d2":function(e,t,r){},"706d":function(e,t,r){"use strict";r("db68")},"755d":function(e,t,r){"use strict";r("a161")},"7d13":function(e,t,r){},"8cac":function(e,t,r){},"9de2":function(e,t,r){"use strict";r("8cac")},a161:function(e,t,r){},b259:function(e,t,r){"use strict";r("3110")},d13c:function(e,t,r){"use strict";r("281b")},d99f:function(e,t,r){"use strict";r("5704")},db68:function(e,t,r){},e720:function(e,t,r){},f7e5:function(e,t,r){"use strict";r("35b2")}});
//# sourceMappingURL=app.12828a02.js.map